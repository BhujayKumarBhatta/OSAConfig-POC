 20.0.0.248
20.0.0.112

20.0.0.136





- 10.0.0.246
   - 10.0.0.164
   - 10.0.0.154

monitor_interface: eth2 didnt work most probably due to missing macaddress



monitor_address_block : 20.0.0.0/24

https://github.com/ceph/ceph-ansible/blob/ansible-2.3/roles/ceph-common/defaults/main.yml

https://github.com/ceph/ceph-ansible/blob/ansible-2.3/roles/ceph-common/templates/ceph.conf.j2


{% if not containerized_deployment and not containerized_deployment_with_kv %}

{% if monitor_address_block %}

mon host = {% for host in groups[mon_group_name] %}{{ hostvars[host]['ansible_all_ipv4_addresses'] | ipaddr(monitor_address_block) | first }}{% if not loop.last %},{% endif %}{% endfor %}

{% elif groups[mon_group_name] is defined %}

mon host = {% for host in groups[mon_group_name] %}

             {% set address = hostvars[host]['monitor_address'] if hostvars[host]['monitor_address'] is defined else monitor_address %}

             {% set interface = hostvars[host]['monitor_interface'] if hostvars[host]['monitor_interface'] is defined else monitor_interface %}

             {% if interface != "interface" %}

               {% for key in hostvars[host].keys() %}

                 {% if hostvars[host][key]['macaddress'] is defined and hostvars[host][key]['device'] is defined and hostvars[host][key]['device'] == interface -%}

                    {{ hostvars[host][key][ip_version]['address'] }}

                 {%- endif %}

               {% endfor %}

             {% elif address != "0.0.0.0" -%}

               {{ address }}

             {%- endif %}

             {%- if not loop.last %},{% endif %}

           {% endfor %}

{% endif %}

{% endif %}  