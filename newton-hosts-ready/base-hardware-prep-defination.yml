# include the host name in inventory-base-hw-prep and run with -i option as below
# ansible-playbook base-hw-prep.yml  -i inventory-base-hw-prep
network_interface_build_needed_for_servers:
  - firstlinetoavoidnull
  - infra1
#  - newton-kvm1

haproxy_server_hostnames: 
  - dcim
  - dcim2
chrony_master_server_hostnames: 
  - dcim
  - dcim2
Chrony_master_server_uplink_names: |
  server 0.north-america.pool.ntp.org offline maxpoll 10 minpoll 8
  server 1.north-america.pool.ntp.org offline maxpoll 10 minpoll 8
  server 2.north-america.pool.ntp.org offline maxpoll 10 minpoll 8
  server 3.north-america.pool.ntp.org offline maxpoll 10 minpoll 8
Chrony_clients_uplink_names: |
  server 10.0.0.52
  server 10.0.0.50
  
nfs_server_hostnames: 
  - rsyslog
  - newtonhost1
nfs_share_names:
  - /images
nova_compute_server_hostnames:
  - compute4
  - newton-kvm1
servers_to_reboot:
  - toavoidnull
#  - newton-kvm1
#################################################################################


#network interface defination for compute6 (Actual Hostname) 

target_hosts:
  infra2:
        nic: 
         - {nicName: eno1,address: ,netmask: ,broadcast: ,gateway: ,dns: ,part_of_vlan: True}
         - {nicName: eno2,address: ,netmask: ,broadcast: ,gateway: ,dns: ,part_of_vlan: True}         
                
        bond: 
          - {bondName: bond1,bondNic: eno1, address: ,netmask: ,broadcast: ,gateway: ,dns: ,part_of_vlan: True}
          - {bondName: bond2, bondNic: eno2, address: ,netmask: ,broadcast: ,gateway: ,dns: ,part_of_vlan: True}     
            
        vNic:
          - {vNicName: bond1.101,address: ,netmask: ,broadcast: ,gateway: ,dns: ,part_of_vlan: True} 
          - {vNicName: bond2.202,address: ,netmask: ,broadcast:  ,gateway: ,dns: ,part_of_vlan: True} 
            
        bridges: 
          - {brName: br-mgmt, brPort: bond1, address: 10.0.0.15 ,netmask: 255.255.255.0 ,broadcast: ,gateway: ,dns: ,part_of_vlan: True,bridge_description: }
          - {brName: br-storage,brPort: bond1.101, address: 10.0.2.15 ,netmask: 255.255.255.0 ,broadcast: ,gateway: ,dns: ,part_of_vlan: True, bridge_description: }
          - {brName: br-vlan,brPort: bond2, address: 10.0.8.15,netmask: 255.255.255.0,broadcast: ,gateway: ,dns: ,part_of_vlan: True, bridge_description: }
          - {brName: br-vxlan,brPort: bond2.202, address: 10.0.1.15,netmask: 255.255.255.0,broadcast: ,gateway: ,dns: ,part_of_vlan: True, bridge_description: }
       
 
 
 
 
 
 
     
#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
network_interfaces:  
     - {forHost: compute6, description: Primary and First physical interface, name: eno1,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno1,part_of_bridge: True,
        bridge_description: Bridge for openstack managment network,bridge_name: br-mgmt,
        bridge_address: 10.0.0.36,bridge_netmask: 255.255.255.0,bridge_broadcast: 10.0.0.255,bridge_gateway: ,
        bridge_dns: }        
     - {forHost: compute6, description: VLAN10 sitting on First Physical Interface, name: eno1.10 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno1,part_of_bridge: True,
        bridge_description: Bridge for Storage network,bridge_name: br-storage,
        bridge_address: 10.0.2.36,bridge_netmask: 255.255.255.0,bridge_broadcast: 10.0.2.255,bridge_gateway: ,
        bridge_dns: }        
     - {forHost: compute6, description: Second physical interface, name: eno2 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno1,part_of_bridge: True,
        bridge_description: Bridge for Providers Network,bridge_name: br-vlan,
        bridge_address: ,bridge_netmask: ,bridge_broadcast: ,bridge_gateway: ,
        bridge_dns: }          
     - {forHost: compute6, description: VLAN2.10 sitting on Second Physical Interface, name: eno2.10 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno1,part_of_bridge: True,
        bridge_description: Bridge for Self Service Network,bridge_name: br-vxlan,
        bridge_address: ,bridge_netmask: ,bridge_broadcast: ,bridge_gateway: ,
        bridge_dns: }   
###  For Compute1 Dell Blade - 03    
     - {forHost: newton-kvm1, description: Primary and First physical interface, name: eno1,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno1,part_of_bridge: True,
        bridge_description: Bridge for openstack managment network,bridge_name: br-mgmt,
        bridge_address: 10.0.0.32,bridge_netmask: 255.255.255.0,bridge_broadcast: 10.0.0.255,bridge_gateway: ,
        bridge_dns: }        
     - {forHost: newton-kvm1, description: VLAN10 sitting on First Physical Interface, name: eno1.10 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno1,part_of_bridge: True,
        bridge_description: Bridge for Storage network,bridge_name: br-storage,
        bridge_address: 10.0.2.32,bridge_netmask: 255.255.255.0,bridge_broadcast: 10.0.2.255,bridge_gateway: ,
        bridge_dns: }        
     - {forHost: newton-kvm1, description: Second physical interface, name: eno2 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno2,part_of_bridge: True,
        bridge_description: Bridge for Providers Network,bridge_name: br-vlan,
        bridge_address: ,bridge_netmask: ,bridge_broadcast: ,bridge_gateway: ,
        bridge_dns: }          
     - {forHost: newton-kvm1, description: VLAN2.10 sitting on Second Physical Interface, name: eno2.10 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno2,part_of_bridge: True,
        bridge_description: Bridge for Self Service Network,bridge_name: br-vxlan,
        bridge_address: 10.0.1.32,bridge_netmask: 255.255.255.0,bridge_broadcast: ,bridge_gateway: ,
        bridge_dns: }      
   
        
# interface for newtonhost1 test host 
     - {forHost: newtonhost1, description: Primary and First physical interface, name: enp5s0,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: enp5s0,part_of_bridge: True,
        bridge_description: Bridge for openstack managment network,bridge_name: br-mgmt,
        bridge_address: 10.0.0.34,bridge_netmask: 255.255.255.0,bridge_broadcast: 10.0.0.255,bridge_gateway: ,
        bridge_dns: }        
     - {forHost: newtonhost1, description: VLAN10 sitting on First Physical Interface, name: enp5s0.10 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: enp5s0,part_of_bridge: True,
        bridge_description: Bridge for Storage network,bridge_name: br-storage,
        bridge_address: 10.0.2.34,bridge_netmask: 255.255.255.0,bridge_broadcast: 10.0.2.255,bridge_gateway: ,
        bridge_dns: }        
     - {forHost: newtonhost1, description: Second physical interface, name: enp9s0 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: enp9s0,part_of_bridge: True,
        bridge_description: Bridge for Providers Network,bridge_name: br-vlan,
        bridge_address: ,bridge_netmask: ,bridge_broadcast: ,bridge_gateway: ,
        bridge_dns: }          
     - {forHost: newtonhost1, description: VLAN2.10 sitting on Second Physical Interface, name: enp9s0.10 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: enp9s0,part_of_bridge: True,
        bridge_description: Bridge for Self Service Network,bridge_name: br-vxlan,
        bridge_address: ,bridge_netmask: ,bridge_broadcast: ,bridge_gateway: ,
        bridge_dns: }         
           
#interfaces for controller 3        
     - {forHost: controller3, description: Primary and First physical interface, name: eno1,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno1,part_of_bridge: True,
        bridge_description: Bridge for openstack managment network,bridge_name: br-mgmt,
        bridge_address: 10.0.0.13,bridge_netmask: 255.255.255.0,bridge_broadcast: 10.0.0.255,bridge_gateway: ,
        bridge_dns: }        
     - {forHost: controller3, description: VLAN10 sitting on First Physical Interface, name: eno1.10 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno1,part_of_bridge: True,
        bridge_description: Bridge for Storage network,bridge_name: br-storage,
        bridge_address: 10.0.2.13,bridge_netmask: 255.255.255.0,bridge_broadcast: 10.0.2.255,bridge_gateway: ,
        bridge_dns: }        
     - {forHost: controller3, description: Second physical interface, name: eno2 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno2,part_of_bridge: True,
        bridge_description: Bridge for Providers Network,bridge_name: br-vlan,
        bridge_address: ,bridge_netmask: ,bridge_broadcast: ,bridge_gateway: ,
        bridge_dns: }          
     - {forHost: controller3, description: VLAN2.10 sitting on Second Physical Interface, name: eno2.10 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno2,part_of_bridge: True,
        bridge_description: Bridge for Self Service Network,bridge_name: br-vxlan,
        bridge_address: ,bridge_netmask: ,bridge_broadcast: ,bridge_gateway: ,
        bridge_dns: } 
#interfaces for controller 2        
     - {forHost: controller2, description: Primary and First physical interface, name: eno1,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno1,part_of_bridge: True,
        bridge_description: Bridge for openstack managment network,bridge_name: br-mgmt,
        bridge_address: 10.0.0.12,bridge_netmask: 255.255.255.0,bridge_broadcast: 10.0.0.255,bridge_gateway: ,
        bridge_dns: }        
     - {forHost: controller2, description: VLAN10 sitting on First Physical Interface, name: eno1.10 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno1,part_of_bridge: True,
        bridge_description: Bridge for Storage network,bridge_name: br-storage,
        bridge_address: 10.0.2.12,bridge_netmask: 255.255.255.0,bridge_broadcast: 10.0.2.255,bridge_gateway: ,
        bridge_dns: }        
     - {forHost: controller2, description: Second physical interface, name: eno2 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno2,part_of_bridge: True,
        bridge_description: Bridge for Providers Network,bridge_name: br-vlan,
        bridge_address: ,bridge_netmask: ,bridge_broadcast: ,bridge_gateway: ,
        bridge_dns: }          
     - {forHost: controller2, description: VLAN2.10 sitting on Second Physical Interface, name: eno2.10 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno2,part_of_bridge: True,
        bridge_description: Bridge for Self Service Network,bridge_name: br-vxlan,
        bridge_address: ,bridge_netmask: ,bridge_broadcast: ,bridge_gateway: ,
        bridge_dns: }
#interfaces for infra2 , earlier controller4 
     
     - {forHost: infra2,  description: Primary and First physical interface, name: eno1,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno1,part_of_bridge: True,
        bridge_description: Bridge for openstack managment network,bridge_name: br-mgmt,
        bridge_address: 10.0.0.15,bridge_netmask: 255.255.255.0,bridge_broadcast: 10.0.0.255,bridge_gateway: ,
        bridge_dns: }        
     - {forHost: infra2, description: VLAN10 sitting on First Physical Interface, name: eno1.10 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno1,part_of_bridge: True,
        bridge_description: Bridge for Storage network,bridge_name: br-storage,
        bridge_address: 10.0.2.15,bridge_netmask: 255.255.255.0,bridge_broadcast: 10.0.2.255,bridge_gateway: ,
        bridge_dns: }        
     - {forHost: infra2, description: Second physical interface, name: eno2 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno2,part_of_bridge: True,
        bridge_description: Bridge for Providers Network,bridge_name: br-vlan,
        bridge_address: ,bridge_netmask: ,bridge_broadcast: ,bridge_gateway: ,
        bridge_dns: }          
     - {forHost: infra2, description: VLAN2.10 sitting on Second Physical Interface, name: eno2.10 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno2,part_of_bridge: True,
        bridge_description: Bridge for Self Service Network,bridge_name: br-vxlan,
        bridge_address: ,bridge_netmask: ,bridge_broadcast: ,bridge_gateway: ,
        bridge_dns: }         
#interfaces for dcim ,aka , haproxy1
     - {forHost: dcim, description: Primary and First physical interface, name: enp9s0,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: enp9s0,part_of_bridge: True,
        bridge_description: Bridge for openstack managment network,bridge_name: br-mgmt,
        bridge_address: 10.0.0.52,bridge_netmask: 255.255.255.0,bridge_broadcast: ,bridge_gateway: ,
        bridge_dns: }        
     - {forHost: dcim, description: Second Physical Interface, name: enp5s0 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: enp5s0,part_of_bridge: True,
        bridge_description: Bridge for Internet,bridge_name: br-internet,
        bridge_address: 14.142.104.138,bridge_netmask: 255.255.255.248 ,bridge_broadcast: 14.142.104.143 ,
        bridge_gateway: 14.142.104.137,
        bridge_dns: 115.112.18.21 115.112.18.131} 
# interface for haproxy 2     
     - {forHost: haproxy2, description: Primary and First physical interface, name: eno1,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno1,part_of_bridge: True,
        bridge_description: Bridge for openstack managment network,bridge_name: br-mgmt,
        bridge_address: 10.0.0.50,bridge_netmask: 255.255.255.0,bridge_broadcast: ,bridge_gateway: ,
        bridge_dns: }        
     - {forHost: haproxy2, description: Second Physical Interface, name: eno2 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno2,part_of_bridge: True,
        bridge_description: Bridge for internet,bridge_name: br-internet,
        bridge_address: 14.142.104.139,bridge_netmask: 255.255.255.248 ,bridge_broadcast: 14.142.104.143 ,
        bridge_gateway: 14.142.104.137,
        bridge_dns: 115.112.18.21 115.112.18.131} 
# INterfaces for RSYSLOG and NFS server
     - {forHost: rsyslog, description: Primary and First physical interface, name: enp3s0,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno1,part_of_bridge: True,
        bridge_description: Bridge for openstack managment network,bridge_name: br-mgmt,
        bridge_address: 10.0.0.57,bridge_netmask: 255.255.255.0,bridge_broadcast: ,bridge_gateway: ,
        bridge_dns: }        
     - {forHost: rsyslog, description: VLAN10 sitting on First Physical Interface, name: enp3s0.10 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno1,part_of_bridge: True,
        bridge_description: Bridge for Storage network,bridge_name: br-storage,
        bridge_address: 10.0.2.57 ,bridge_netmask: 255.255.255.0 ,bridge_broadcast: 10.0.2.255 ,bridge_gateway: ,
        bridge_dns: }        
     - {forHost: rsyslog, description: Second physical interface, name: enp6s0 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno1,part_of_bridge: True,
        bridge_description: Bridge for Providers Network,bridge_name: br-vlan,
        bridge_address: ,bridge_netmask: ,bridge_broadcast: ,bridge_gateway: ,
        bridge_dns: }          
     - {forHost: rsyslog, description: VLAN2.10 sitting on Second Physical Interface, name: enp6s0.10 ,address: ,netmask: ,broadcast: ,
        gateway: ,dns: ,part_of_vlan: True,parent_name: eno1,part_of_bridge: True,
        bridge_description: Bridge for Self Service Network,bridge_name: br-vxlan,
        bridge_address: ,bridge_netmask: ,bridge_broadcast: ,bridge_gateway: ,
        bridge_dns: } 

############################################################################################

#Proxy and apt configuration 

####################################################################################################
host_table_entry: |
        10.0.0.52       haproxy2
        10.0.0.50        haproxy1
etc_environment_entry: |
        export https_proxy="http://10.0.0.52:3128"
        export http_proxy="http://10.0.0.52:3128"
        no_proxy=localhost,127.0.0.1,10.*.*.*,*.poc,dcim,dcim2,gitlab
apt_proxy_entry: |
        Acquire::http { Proxy "http://10.0.0.52:3128";};
        Acquire::https { Proxy "http://10.0.0.52:3128";};        
pip_proxy_entry: |
        [global]
        proxy = 10.0.0.52:3128
     

############################################################## 

base_apt_packages:
 - python
 - bridge-utils
 - vlan 
 - debootstrap
 - ifenslave 
 - ifenslave-2.6 
 - lsof 
 - lvm2  
 - openssh-server 
 - sudo 
 - tcpdump 
#####################################################





